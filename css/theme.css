/* Minimal, additive design improvements */
:root {
  --font-sans: -apple-system, BlinkMacSystemFont, "SF Pro Text", Segoe UI,
               Roboto, Helvetica, Arial, "PingFang SC", "Hiragino Sans GB",
               "Noto Sans CJK SC", "Microsoft YaHei", "Noto Sans", sans-serif;
  /* Academic-leaning serif stack (Latin + CJK) */
  --font-serif: "STIX Two Text", "Source Serif 4", Georgia, "Times New Roman",
                "Songti SC", "Source Han Serif SC", "Noto Serif CJK SC",
                "SimSun", serif;
  --text: #1f2328;
  --muted: #6e7781;
  --bg: #ffffff;
  --line: #eaeef2;
  --link: #0969da;
  --code-bg: #f6f8fa;
  /* Typography scales */
  --content-width: 72ch;
  --lh-body: 1.68;
  --lh-heading: 1.25;
  --p-gap: 0.85rem;
}

html { font-size: clamp(15px, 1.6vw, 18px); }
body {
  /* Switch to serif stack for an academic look */
  font-family: var(--font-serif);
  color: var(--text);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.7;
  width: auto !important; /* override blog.css body width */
}

/* Align header/nav/main/footer to the same content width */
main, header, nav, footer { max-width: var(--content-width); margin-left: auto; margin-right: auto; padding-left: 1.2rem; padding-right: 1.2rem; }
main { padding-top: 1.2rem; padding-bottom: 1.2rem; }
footer { padding-top: 1.2rem; padding-bottom: 2rem; border-top: 1px solid var(--line); color: var(--muted); font-size: 0.95em; }

/* Typography */
h1, h2, h3 { line-height: var(--lh-heading); margin: 1.25rem 0 0.7rem; font-weight: 600; letter-spacing: 0; }
h4, h5, h6 { line-height: 1.3;  margin: 1rem 0 0.55rem; font-weight: 600; }
p { margin: 0 0 var(--p-gap) 0; line-height: var(--lh-body); }
ul, ol { margin: 0.35rem 0 0.9rem 1.3rem; }
blockquote { border-left: 3px solid var(--line); padding-left: 0.9rem; color: #5c6166; }

/* Indent first paragraph after headings or lists */
article h1 + p,
article h2 + p,
article h3 + p,
article h4 + p,
article h5 + p,
article h6 + p,
article ul + p,
article ol + p {
  text-indent: 1.5em;
}

/* First paragraph in article (after main title) */
article > p:first-of-type { text-indent: 1.5em; }
/* If the body is wrapped (e.g., a div inserted by generator), handle nested first paragraph */
article > div:first-of-type > p:first-of-type { text-indent: 1.5em; }

/* After blockquotes */
article blockquote + p { text-indent: 1.5em; }

/* After images, figures, or tables */
article img + p,
article figure + p,
article table + p { text-indent: 1.5em; }

/* Links */
a { color: var(--link); text-decoration-thickness: 1px; text-underline-offset: 2px; }
a:hover, a:focus { text-decoration: underline; }

/* Media */
img, video, svg { max-width: 100%; height: auto; }
img { display: block; margin: 1rem auto; border-radius: 6px; }
figure { margin: 1rem 0; }
figcaption { color: var(--muted); font-size: 0.9em; text-align: center; }

/* Tables */
table { border-collapse: collapse; width: 100%; }
th, td { border-bottom: 1px solid var(--line); padding: 0.5rem 0.6rem; }

/* Code & Pre */
code, pre, tt { font-feature-settings: "ss01" on, "calt" on; }
pre { background: var(--code-bg); border: 1px solid var(--line); border-radius: 8px; padding: 0.9rem 1rem; overflow: auto; }
code:not(pre code) { background: var(--code-bg); padding: 0.1rem 0.35rem; border-radius: 4px; }

/* KaTeX spacing */
.katex-display { margin: 1.1rem 0; overflow-x: auto; }

/* Nav: wrap on small screens */
nav ul { display: flex; flex-wrap: wrap; gap: 6px 16px; }
nav ul li { margin: 0; }

/* Post meta */
.info { color: var(--muted); }
.info a { color: var(--muted); }

/* Dark mode (automatic) */
@media (prefers-color-scheme: dark) {
  :root {
    --text: #e6edf3; --muted: #9ea7b3; --bg: #0d1117; --line: #30363d; --code-bg: #161b22; --link: #2f81f7;
  }
  img { opacity: 0.98; }
}
