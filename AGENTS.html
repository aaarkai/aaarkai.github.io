<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="description" content="Kai's Blog" />
        <meta name="author" content="Kai Wang" />
        <!-- <meta name="google-site-verification" content="YE2oeW4OwVOPdVVfdpYIakOuD0A2Qo80W_sUbMJDGok" /> -->
        <meta property="og:title" content="" />
        <meta property="og:type" content="article" />
        <meta property="og:site_name" content="Kai's Blog" />
        <meta property="article:tag" content="" />
        <title></title>

        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"
            integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC"
            crossorigin="anonymous"
        />

        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link
            rel="stylesheet"
            href="/css/default.css"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="/css/blog.css" crossorigin="anonymous" />
        <link rel="stylesheet" href="/css/theme.css" crossorigin="anonymous" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="RSS"
            href="https://aarkai.github.io/rss.xml"
        />
    </head>
    <body>
        <header class="hide-on-print">
            <div id="site-title">
                <a href="/blog.html">Kai's Blog</a>
            </div>
            <div style="display: none">
                <img src="/files/kai/kai_thumb.jpg" />
            </div>
        </header>
        <nav class="hide-on-print">
            <ul>
                <li><a href="/">About</a></li>
                <li><a href="/blog.html">Blog</a></li>
                <li><a href="/cnblog.html">中文博客</a></li>
                <li><a href="/files/cv.pdf">CV</a></li>
                <li><a href="/pages/tools.html">Tools</a></li>
                <li>
                    <a href="https://aaarkai.github.io/running_page/"
                        >Running Page</a
                    >
                </li>
            </ul>
        </nav>
        <main>
            <article>
                <h1 id="article-title"></h1>
                <h1 data-number="1" id="repository-guidelines"><span
class="header-section-number">1</span> Repository Guidelines</h1>
<h2 data-number="1.1" id="project-structure-module-organization"><span
class="header-section-number">1.1</span> Project Structure &amp; Module
Organization</h2>
<ul>
<li>Content: <code>posts/</code> and <code>cnposts/</code> for blog
posts, <code>pages/</code> for standalone pages.</li>
<li>Assets: <code>css/</code>, <code>files/</code>,
<code>favicon.ico</code>.</li>
<li>Site generator: <code>site.hs</code> (Hakyll rules) and
<code>ChaoDoc.hs</code> (Pandoc helpers).</li>
<li>Templates: <code>templates/</code> (e.g., <code>post.html</code>,
<code>default.html</code>).</li>
<li>Output: <code>_site/</code> (generated), <code>_cache/</code> (build
cache). Do not edit these.</li>
<li>Publishing helpers: <code>pub.py</code>, <code>pub.yaml</code>,
<code>index_template.html</code>, <code>push.sh</code>.</li>
<li>Haskell project files: <code>kaisite.cabal</code>,
<code>stack.yaml</code>.</li>
</ul>
<h2 data-number="1.2" id="build-test-and-development-commands"><span
class="header-section-number">1.2</span> Build, Test, and Development
Commands</h2>
<ul>
<li><code>stack build</code> — builds the Hakyll executable
(<code>kaisite</code>).</li>
<li><code>stack exec kaisite clean</code> — removes generated site
output.</li>
<li><code>stack exec kaisite build</code> — generates the site into
<code>_site/</code>.</li>
<li><code>stack exec kaisite watch</code> — rebuilds on change and
serves locally (http://127.0.0.1:8000).</li>
<li><code>python pub.py &gt; _site/index.html</code> — renders the home
page from <code>pub.yaml</code>.</li>
<li><code>./push.sh</code> — end‑to‑end publish to <code>main</code>
(uses git stash/branch switching). Use with care.</li>
</ul>
<p>Prereqs: Stack (GHC), Python 3 with <code>requirements.txt</code>,
and a local <code>katex_cli</code> binary in repo root (used by
<code>site.hs</code>).</p>
<h2 data-number="1.3" id="coding-style-naming-conventions"><span
class="header-section-number">1.3</span> Coding Style &amp; Naming
Conventions</h2>
<ul>
<li>Haskell: 2‑space indent; UpperCamelCase modules, lowerCamelCase
functions; keep imports explicit.</li>
<li>Markdown posts: name as <code>YYYY-MM-DD-title.md</code>. Include
YAML front matter with at least <code>title:</code>; <code>date:</code>
optional (parsed from filename).</li>
<li>Keep HTML in templates; prefer Markdown + metadata in content
files.</li>
</ul>
<h2 data-number="1.4" id="testing-guidelines"><span
class="header-section-number">1.4</span> Testing Guidelines</h2>
<ul>
<li>No formal unit tests. Validate by:
<ul>
<li><code>stack exec kaisite build</code> then open
<code>_site/index.html</code>.</li>
<li><code>stack exec kaisite watch</code> for live preview.</li>
<li>Check math rendering (KaTeX) and internal links.</li>
</ul></li>
</ul>
<h2 data-number="1.5" id="commit-pull-request-guidelines"><span
class="header-section-number">1.5</span> Commit &amp; Pull Request
Guidelines</h2>
<ul>
<li>Commits: small, descriptive, present‑tense (e.g.,
<code>Add cnpost: fluid-dynamics basics</code>).</li>
<li>PRs: include summary, before/after screenshots for visual changes,
and link related issues. Avoid committing <code>_site/</code> except via
publish workflow.</li>
</ul>
<h2 data-number="1.6" id="security-configuration-tips"><span
class="header-section-number">1.6</span> Security &amp; Configuration
Tips</h2>
<ul>
<li>Do not hardcode secrets; this repo is public.</li>
<li>Ensure <code>katex_cli</code> is executable
(<code>chmod +x katex_cli</code>) and matches platform.</li>
<li>Do not edit <code>_site/</code> directly; regenerate via build
steps.</li>
<li>When using <code>./push.sh</code>, confirm you’re on
<code>develop</code> and review changes before pushing.</li>
</ul>
            </article>
        </main>
        <footer class="hide-on-print">
            © 2024 -
            <time
                ><script>
                    document.write(new Date().getFullYear());
                </script></time
            >
            <a href="https://aarkai.github.io" rel="author">Kai Wang</a>.
            Licensed under a
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"
                >Creative Commons Attribution 4.0 International License</a
            >. <a href="/README.html">Blog README</a>.
        </footer>
    </body>
</html>
